---
создал заметку: "2025-03-03"
---
# **Find**

**find** - поиск различных файлов, каталогов и т.п.

**find [папка] [параметры] критерий шаблон [действие]**

*Папка* - каталог в котором будем искать
*Параметры* - дополнительные параметры, например, глубина поиска, и т д
*Критерий* - по какому критерию будем искать: имя, дата создания, права, владелец и т д.
*Шаблон* - непосредственно значение по которому будем отбирать файлы.

Параметры:
- **-P** - никогда не открывать символические ссылки.
- **-L** - получает информацию о файлах по символическим ссылкам. Важно для дальнейшей обработки, чтобы обрабатывалась не ссылка, а сам файл.
- **-maxdepth** - максимальная глубина поиска по подкаталогам, для поиска только в текущем каталоге установите 1.
- **-depth** - искать сначала в текущем каталоге, а потом в подкаталогах.
- **-mount** искать файлы только в этой файловой системе.
- **-version** - показать версию утилиты find.
- **-print** - выводить полные имена файлов.
- **-type f** - искать только файлы.
- **-type d** - поиск папки в Linux.

Критерии:
- **-name** - поиск файлов по имени.
- **-perm** - поиск файлов в Linux по режиму доступа.
- **-user** - поиск файлов по владельцу.
- **-group** - поиск по группе.
- **-mtime** - поиск по времени модификации файла.
- **-atime** - поиск файлов по дате последнего чтения.
- **-nogroup** - поиск файлов, не принадлежащих ни одной группе.
- **-nouser** - поиск файлов без владельцев.
- **-newer** - найти файлы новее чем указанный.
- **-size** - поиск файлов в Linux по их размеру.

`-name “nginx.conf”` – Находит файлы с именем "nginx.conf", в каталоге
`-iname nginX.conf` - Эта команда также найдёт файлы с именем "nginx.conf", независимо от регистра символов

`-type` - Поиск по типу файла, можно указывать сразу несколько: `type f,d`
*f* – простой файл;
*d* – каталог;
*l* – символическая ссылка;
*b* – блочное устройство;
*c* – символьное устройство (dev);
*p* – именованный канал;
*s* – сокет.

`-size +50000k` – Найти файлы размером более 50000k в каталоге
`-size` - Поиск по размеру файла
"`-`" (-1M) - для поиска файлов до заданного размера 
"`+`" (+1M) - для поиска файлов больше заданного размера 
`-size +3k -size -8k` - можно указывать диапазоны размеров файлов, сначала  указываем нижнюю границу, затем верхнюю.
*с* — байты
*k* – килобайты
*M* – мегабайты
*G* – гигабайты

`-empty` - Поиск пустых файлов и каталогов.
`-size +1c` - Поиск всех не пустых файлов и директорий

`-ctime -60` — поиск файлов и директорий изменения в которые были **внесены за последний час** (60 минут);
`-ctime +60` — поиск файлов и директорий изменения в которые были внесены в любое время, **за исключением последнего часа**;

`-mtime -1` — поиск файлов и директорий изменения в которые были внесены **за последний день**;
`-mtime +1` — поиск файлов и директорий изменения в которые были внесены в любое время, **за исключением последнего дня**.

`-atime -60` — поиск файлов, которые были **использованы в последние 60 дней**.

Поиск по имени пользователя, группе и правам.
`-user` - для поиска по пользователю 
`-group` - для поиска по группе
`-perm 777` - поиск по правам

`-mount` - искать файлы только в этой файловой системе.

`-depth` - искать сначала в текущем каталоге, а потом в подкаталогах.
`-maxdepth` - максимальная глубина поиска по подкаталогам, для поиска только в текущем каталоге установите 1.

#### **Примеры использований:** 

`find . -name "*.png"` - находит все файлы с расширением .png в текущем каталоге

`find ./test ./test2 -type f -name "*.c"` -  Искать в двух каталогах одновременно

`find . -maxdepth 1 -type f -name ".*"` - Найти скрытые файлы только в текущей папке

`find . -empty -exec ls -ld {} \;` - Для выполнения произвольных команд для найденных файлов используется опция **-exec**. Например, для того чтобы найти все пустые папки и файлы, а затем выполнить ls для получения подробной информации о каждом файле используйте
`find /tmp -type f -name "*.txt" -exec rm -f {} \;` - Удалить все текстовые файлы в tmp
`find /home/bob/dir -type f -name *.log -size +100M -exec rm -f {} \;` - Удалить все файлы больше 100 мегабайт

#### **and, or, not**
Вот пример использования комбинации операторов «and» и «or» вместе(доступно ещё "not"):
`find . -not -name "test*"` - Найти файлы, которые не соответствуют шаблону
`find . -name "test" -not -name "*.php"` - Несколько критериев

```sh
find . -type f -user "www-data" \(-size +1M -size -2M -or -size +3M -size -4M \) -and -atime -100 -name "*"
```


# **Grep**

**grep** - поиск текстовых файлов, содержащих определённые строки. 

Синтаксис команды выглядит следующим образом:

**$ grep [опции] шаблон [/путь/к/файлу/или/папке...]**
Или:
**$ команда | grep [опции] шаблон**

Пример: *ls | grep .yml* - выведет все файлы с расширением .yml

**grep "^unix" log.txt**  - найти строки, которые начинаются с "unix" в log.txt
**grep "os$" log.txt** - найти строки, которые заканчиваются на "os" в log.txt

- `-r searchargument newfolder` — **рекурсивно** просматривает все файлы в папке newfolder на наличие поискового аргумента
- `-R` — рекурсивный поиск включая ссылки.
- `-w, --word-regexp` — поиск **по всему слову**, т.е. требует совпадения по всем символам в слове
- `-x, --line-regexp` — искать шаблон как **целую строку**, от начала и до символа перевода строки.
- `-v, --invert-match` — **обратный поиск** (вернёт всё, что не соответствует заданной строке)
- `-n, --line-number` — указывает **номер строки** в документе найденного объекта поиска. 
- `-i, --ignore-case` — поиск без учёта регистра символов
- `-c, --count` — выводит только **количество строк**, соответствующих шаблону
- `-m, --max-count=NUM` — **остановить поиск** после того как будет найдено указанное количество строк.
- `-h, --no-filename ` — Отобразить совпадающие строки, но не отображать имена файлов. Если -r
- `-l, --files-with-matches` — Отображает только список имен файлов, без найденных строк и текста.
- `-e` (шаблон) — Позволяет явно указать шаблон для поиска. Также помогает, если шаблон начинается с дефиса (`-`), чтобы grep не интерпретировал его как флаг.
- **`grep -e 'error' -e 'warning' log.txt`**

- `-f patterns.txt` (файл с шаблонами) — Читать **шаблоны из файла** (по одному на строку)
- `-o, --only-matching` — Выводить только совпадающие части совпадающей строки(**без лишних слов**)
- `-I` — пропускать двоичные файлы.
- `-a` — обрабатывать двоичные файлы как текст.
- `-s, --no-messages` — не выводить ошибки чтения файлов.
- `--include=”*.php”` — искать только в файлах с расширением php.
- `--exclude=".journal"` — исключить все файлы с расширением .journal
- `--color` — включить цветной режим, доступные значения: **never, always и auto**
- `-A <количество>` — выводит найденную строку и следующую строку после совпадения, количество выводимых строк можно менять
- `-B <количество>` — выводит найденную строку и предыдущую строку до совпадения, количество выводимых строк можно менять
- `-C <количество>` — выводит найденную строку и строки до и после совпадения, количество выводимых строк можно менять
- `-E` — Включает поддержку расширенных регулярных выражений (ERE) **`grep -E 'error|warning' log.txt`**
	Позволяет использовать более сложные конструкции, такие как:
    - `+` (один или более повторений),
    - `|` (логическое ИЛИ),
    - `()` (группировка),
    - `?` (ноль или одно повторение),
    - `{n,m}` (диапазон повторений).
- `-F` — рассматривать шаблон поиска как обычную строку, а не регулярное выражение;


# **Sort**

общий синтаксис команды:
**$ sort опции файл**
Или
**$ команда | sort опции**

**Опции:**
- `-r` - сортировать в **обратном** порядке
- `-R` - переставляет данные **в случайном порядке**.
- `-k` - указать **поле** по которому нужно **сортировать** строки, если не задано, сортировка выполняется по всей строке.
- `-n` - сортировка строк linux по **числовому значению**. **Важно:** если в колонке или файле используются числа наподобии: "1 5 10 3 5 2 60 23 432 21", то всегда нужно использовать *-n*, иначе будет: 1 10 2 21 23 3 и т.д., поскольку числа сортируются только по первым буквам.
- `-M` - Сортировать по **месяцам**
- `-u` - игнорировать **повторяющиеся** строки
- `-h` - Сортировать по числовым значениям человека(Эта опция позволяет сравнивать буквенно-цифровые значения, например 1k (т.е. 1000))
- `-f` - Игнорировать регистр при сортировке
- `-b` - не учитывать пробелы
- `-d` - использовать для сортировки только буквы и цифры
- `-i` - сортировать только по ASCII символах
- `-с`- проверить был ли отсортирован файл
- `-m` - объединение ранее отсортированных файлов

**Другие опции:**

- `-o, --output=FILE` - Записать результат в ФАЙЛ вместо стандартного вывода
- `-t` - использовать в качестве разделителя полей ваш символ вместо пробела.

**Примеры:**

`sort test.txt`
Вот несколько принципов, по которым команда sort linux сортирует строки:
- Строки с цифрами размещаются выше других строк
- Строки, начинающиеся с букв нижнего регистра размещаются выше
- Сортировка выполняется в соответствии алфавиту
- Строки сначала сортируются по алфавиту, а уже вторично по другим правилам.

`ls -l | sort -k9` - Отсортируем вывод команды ls по девятой колонке, то есть по имени файла или папки. Колонку укажем опцией -k

`ls -l | sort -nk2` - Отсортируем вывод команды ls по второй колонке. Для сортировки по числовому значению используется опция -n

`sort -u test.txt` - Удаление дубликатов

`ls -la | sort -nk2 -k9` - отсортируем вывод ls по второму первично и вторично девятому полях